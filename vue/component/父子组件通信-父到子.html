<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>


<div id="app">
  <cpn v-bind:cmovies="movies" :cmessage="message" :prop-x="validMsg"></cpn>
  <!--<cpn cmovies="movies" cmessage="message"></cpn>-->
</div>

<!-- template -->
<template id="cpn">
  <div>
    <!-- 往模板写入 props 定义的属性 -->
    <h2>{{cmovies}}</h2>

    <ul>
      <li v-for="item in cmovies">{{item}}</li>
    </ul>

    <p>{{cmessage}}</p>
    {{propX}}
  </div>
</template>

<!-- 开发环境版本，包含了有帮助的命令行警告 -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>

  // 父传子: props
  const cpn = {
    template: '#cpn',
    // 1. 定义子组件的属性名
    // 2. 在 Vue 实例中 绑定
    // props 一: 数组类型
    // props: ['cmovies', 'cmessage'],
    // props 二: 对象类型
    props: {
      // 方式 1. 类型限制
      // cmovies: Array, // 可以多种类型
      // cmessage: String

      // 方式 2. 提供默认值: 在 v-bind 绑定父组件值时, 使用默认值
      cmovies: {
        type: Array,
        // Invalid default value for prop "cmovies":
        // Props with type Object/Array must use a factory function
        // to return the default value.
        // default: [], // '1', '2', '3'
        // 默认值必须为 函数, 返回对应的类型
        default() {
          return [];
        },
        required: true // 必传值:  Missing required prop: "cmovies"
      },
      cmessage: {
        type: [String, Number],
        default: 'default message'
      },
      // 属性名不可驼峰, 否则会出错
      // 如果定义时使用驼峰, 则绑定时转为 - 连接
      propX: {
        // 验证属性
        validator(value) {
          return ['success', 'warning', 'info'].indexOf(value) !== -1;
        }
      }
    },
    // data 本身是个函数
    data() {
      // 必须 return object
      return {};
    }
  };

  const app = new Vue({
    el: '#app',
    data: {
      message: '父组件的message',
      movies: ['海贼王', '海尔兄弟'],
      validMsg: 'success'
    },
    components: {
      // 对象增强写法
      cpn
    }
  });
</script>

</body>
</html>